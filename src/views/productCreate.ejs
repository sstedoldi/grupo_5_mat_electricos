<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("partials/head") %>
        <link rel="stylesheet" href="/css/style-products.css">
        </link>
</head>

<body>
    <!-- HEADER -->
    <header class="main-header">
        <%- include("partials/header") %>
    </header>
    <!-- &&&& -->
    <!-- MAIN -->
    <main>
        <div class="form-product-create">
            <h3 class="form-create-title"> Cargá un nuevo producto!</h3>
            <form id="productCreateForm" action="/products/" method="POST" enctype="multipart/form-data" >
                <div class="div-create-forms">
                    <!-- Categoria -->
                    <div class="formularios-create">
                        <label for="category" class="form-label-create">Categoria</label>
                        <select id="category"
                            value="<%= locals.oldData && oldData.category_id ? oldData.category_id : "" %>"
                            name="category_id" class="form-input-create">
                            <option disabled selected>- Seleccione la categoria -</option>
                            <% categories.forEach(category=> { %>
                                <option value="<%= category.id %>">
                                    <%= category.name %>
                                </option>
                                <% }); %>
                        </select>
                        <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.category_id ? errors.category_id.msg : "" %>
                        </div>
                    </div>
                    <!-- Subcategoria -->
                    <div class="formularios-create">
                        <label for="subcategory" class="form-label-create">Subcategoria</label>
                        <select id="subcategory"
                            value="<%= locals.oldData && oldData.subcategory_id ? oldData.subcategory_id : "" %>"
                            name="subcategory_id" class="form-input-create">
                            <option disabled selected>- Seleccione la Subcategoria -</option>
                            <% subcategories.forEach(subcategory=> { %>
                                <option value="<%= subcategory.id %>">
                                    <%= subcategory.name %>
                                </option>
                                <% }); %>
                        </select>
                        <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.subcategory_id ? errors.subcategory_id.msg : "" %>
                        </div>
                    </div>
                    <!-- Brand -->
                    <div class="formularios-create">
                        <label for="brand_id" class="form-label-create">Marca</label>
                        <select id="brand_id" name="brand_id"
                            value="<%= locals.oldData && oldData.brand_id ? oldData.brand_id : "" %>"
                            class="form-input-create">
                            <option disabled selected>- Seleccione la marca -</option>
                            <% brands.forEach(brand=> { %>
                                <option value="<%= brand.id %>">
                                    <%= brand.name %>
                                </option>
                                <% }); %>
                        </select>
                        <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.brand_id ? errors.brand_id.msg : "" %>
                        </div>
                    </div>
                    <!-- Price -->
                    <div class="formularios-create">
                        <label for="nonvatPrice" class="form-label-create">Precio (sin IVA)</label>
                        <input class="form-input-create" type="number" name="nonvatPrice" id="nonvatPrice"
                            placeholder="Ej: 2.785"
                            value="<%= locals.oldData && oldData.nonvatPrice ? oldData.nonvatPrice : "" %>" />
                            <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.nonvatPrice ? errors.nonvatPrice.msg : "" %>
                        </div>
                    </div>

                    <!-- vat -->
                    <div class="formularios-create">
                        <label for="vat" class="form-label-create">IVA</label>
                        <input class="form-input-create" type="number" name="vat" id="vat" placeholder="Ej: 21.0"
                            value="<%= locals.oldData && oldData.vat ? oldData.vat : "" %>" />
                            <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.vat ? errors.vat.msg : "" %>
                        </div>
                    </div>
                    <!-- Discount -->
                    <div class="formularios-create">
                        <label for="discount" class="form-label-create">Descuento</label>
                        <input class="form-input-create" type="number" name="discount" id="discount"
                            placeholder="Ej: 15"
                            value="<%= locals.oldData && oldData.discount ? oldData.discount : "" %>" />
                            <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.discount ? errors.discount.msg : "" %>
                        </div>
                    </div>
                    <!-- Stock -->
                    <div class="formularios-create">
                        <label for="stock" class="form-label-create">Stock inicial</label>
                        <input class="form-input-create" type="number" name="stock" id="stock" placeholder="Ej: 100"
                            value="<%= locals.oldData && oldData.stock ? oldData.stock : "" %>" />
                            <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.stock ? errors.stock.msg : "" %>
                        </div>
                    </div>
                    <!-- Stock minimo -->
                    <div class="formularios-create">
                        <label for="stock_min" class="form-label-create">Stock minimo</label>
                        <input class="form-input-create" type="number" name="stock_min" id="stock_min"
                            placeholder="Ej: 20"
                            value="<%= locals.oldData && oldData.stock_min ? oldData.stock_min : "" %>" />
                            <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.stock_min ? errors.stock_min.msg : "" %>
                        </div>
                    </div>
                    <!-- Image -->
                    <div class="formularios-create">
                        <label for="image" class="form-label-create">Imagen</label>
                        <input type="file" id="image" name="image" class="form-input-create"
                            value="<%= locals.oldData && oldData.image ? oldData.image : "" %>">
                        <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.image ? errors.image.msg : "" %>
                        </div>
                    </div>
                    <!-- Description -->
                    <div class="formularios-create-description">
                        <label for="description" class="form-label-create"
                            value="<%= locals.oldData && oldData.description ? oldData.description : "" %>">Descripción</label>
                        <textarea name="description" id="description" class="form-input-create-description"></textarea>
                        <span></span>
                        <div class="errors">
                            <%= locals.errors && errors.description ? errors.description.msg : "" %>
                        </div>
                    </div>
                    <div class="formularios-create-button">
                        <input class="button-create" type="submit" value="Crear producto" />
                    </div>
                </div>
            </form>
        </div>
    </main>
    <!-- &&&& -->
    <!-- FOOTER -->
    <footer class="main-footer">
        <%- include("partials/footer") %>
    </footer>
    <!-- &&&& -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="/js/productCreateValidation.js"></script>
</body>

</html>